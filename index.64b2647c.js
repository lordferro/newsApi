const e={form:document.querySelector(".js-search-form"),articlesContainer:document.querySelector(".js-articles-container"),loadMoreBtn:document.querySelector('[data-action="load-more"]')},t=new class{fetchData(){return fetch(`https://newsapi.org/v2/everything?q=${this.searchQuery}&apiKey=525ac24a30b345fc93a5e4d238eecf81&pageSize=5&page=${this.page}`).then((e=>e.json())).then((({articles:e})=>(this.incrementPage(),e)))}get query(){return this.searchQuery}set query(e){this.searchQuery=e}incrementPage(){this.page+=1}resetPage(){this.page=1}constructor(){this.searchQuery="",this.page=1}},r=new class{getRefs(e){const t={};return t.button=document.querySelector(e),t.label=t.button.querySelector(".label"),t.spinner=t.button.querySelector(".spinner"),t}show(){this.refs.button.classList.remove("is-hidden")}hide(){this.refs.button.classList("is-hidden")}disable(){this.refs.button.disabled=!0,this.refs.label.textContent="Грузим...",this.refs.spinner.classList.remove("is-hidden")}enable(){this.refs.button.disabled=!1,this.refs.label.textContent="Показать ещё",this.refs.spinner.classList.add("is-hidden")}constructor({selector:e}){this.refs=this.getRefs(e)}}({selector:'[data-action="load-more"]'});function n(){r.disable(),t.fetchData().then((t=>{if(0===t.length)throw new Error("no data");!function(t){const r=t.reduce(((e,t)=>function({url:e,urlToImage:t,title:r,author:n,description:s}){return`  <li>\n    <a href="${e}" target="_blank" rel="noopener noreferrer">\n      <article>\n        <img src="${t}" alt="" width="480">\n        <h2>${r}</h2>\n        <p>Posted by: ${n}</p>\n        <p>${s}</p>\n      </article>\n    </a>\n  </li>`}(t)+e),"");e.articlesContainer.insertAdjacentHTML("beforeend",r)}(t),r.enable()})).catch(s)}function s(e){return console.log(e)}e.form.addEventListener("submit",(function(s){s.preventDefault(),t.searchQuery=s.currentTarget.elements.query.value,r.show(),e.articlesContainer.innerHTML="",t.resetPage(),n()})),e.loadMoreBtn.addEventListener("click",(function(){n()}));
//# sourceMappingURL=index.64b2647c.js.map
