{"mappings":"YAMA,MAAMA,EAAO,CACXC,KAAMC,SAASC,cAAc,mBAC7BC,kBAAmBF,SAASC,cAAc,0BAC1CE,YAAaH,SAASC,cAAc,8BAGhCG,EAAe,ICTN,MAOXC,YACI,OAAOC,MAAM,uCAAYC,KAAKC,uEAAgDD,KAAKE,QAAQC,MAAKC,GAAWA,EAAQC,SAAQF,MAAK,EAACG,SAAEA,MAC/HN,KAAKO,gBACED,I,CAIXE,YACA,OAAOR,KAAKC,W,CAGZO,UAAMC,GACNT,KAAKC,YAAcQ,C,CAEvBF,gBACIP,KAAKE,MAAQ,C,CAGjBQ,YACIV,KAAKE,KAAO,C,CAzBhBS,cACIX,KAAKC,YAAc,GACnBD,KAAKE,KAAO,C,GDOdU,EAAc,IEbL,MAKXC,QAAQC,GACJ,MAAMC,EAAO,GAKb,OAJAA,EAAKC,OAASvB,SAASC,cAAcoB,GACrCC,EAAKE,MAAQF,EAAKC,OAAOtB,cAAc,UACvCqB,EAAKG,QAAUH,EAAKC,OAAOtB,cAAc,YAElCqB,C,CAGXI,OACInB,KAAKe,KAAKC,OAAOI,UAAUC,OAAO,Y,CAEtCC,OACItB,KAAKe,KAAKC,OAAOI,UAAUG,IAAI,Y,CAGnCC,UACIxB,KAAKe,KAAKC,OAAOS,UAAW,EAC5BzB,KAAKe,KAAKE,MAAMS,YAAc,YACxB1B,KAADe,KAAKG,QAAQE,UAAUC,OAAO,Y,CAEvCM,SACI3B,KAAKe,KAAKC,OAAOS,UAAW,EAC5BzB,KAAKe,KAAKE,MAAMS,YAAc,eAC9B1B,KAAKe,KAAKG,QAAQE,UAAUG,IAAI,Y,CA5BpCZ,aAAYG,SAACA,IACTd,KAAKe,KAAOf,KAAKa,QAAQC,E,GFWG,CAAEA,SAAU,8BAqBhD,SAASc,IACPhB,EAAYY,UACZ3B,EAAaC,YAAYK,MAAKG,IAC5B,GAAwB,IAApBA,EAASuB,OAAe,MAAM,IAAIC,MAAM,YAQhD,SAAwBxB,GACxB,MAAMyB,EAAkBzB,EAAS0B,QAAO,CAACC,EAAQC,IAOjD,UAAsBC,IAAEA,EAAGC,WAAEA,EAAUC,MAAEA,EAAKC,OAAEA,EAAMC,YAAEA,IACtD,MAAO,wBACMJ,qFAEKC,uCACNC,iCACUC,qBACXC,4C,CAbFC,CAAaN,GAAWD,GAC9B,IAEH1C,EAAKI,kBAAkB8C,mBAAmB,YAAaV,E,CAXrDW,CAAepC,GACfM,EAAYe,QAAQ,IACnBgB,MAAMC,E,CAyBX,SAASA,EAAQC,GACf,OAAOC,QAAQC,IAAIF,E,CApDrBtD,EAAKC,KAAKwD,iBAAiB,UAG3B,SAAsBC,GAClBA,EAAMC,iBAENrD,EAAaI,YAAcgD,EAAME,cAAcC,SAAS5C,MAAM6C,MAEhEzC,EAAYO,OAgDZ5B,EAAKI,kBAAkB2D,UAAY,GA9CnCzD,EAAaa,YACbkB,G,IAVFrC,EAAKK,YAAYoD,iBAAiB,SAclC,WACEpB,G","sources":["src/index.js","src/js/components/news-service.js","src/js/components/loadMoreBtn.js"],"sourcesContent":["import NewsFetchApi from \"./js/components/news-service\";\n\nimport './css/common.css';\nimport LoadMoreBtn from './js/components/loadMoreBtn';\n\n\nconst refs = {\n  form: document.querySelector('.js-search-form'),\n  articlesContainer: document.querySelector('.js-articles-container'),\n  loadMoreBtn: document.querySelector('[data-action=\"load-more\"]'),\n};\n\nconst newsApiFetch = new NewsFetchApi();\nconst loadMoreBtn = new LoadMoreBtn({ selector: '[data-action=\"load-more\"]' });\n\nrefs.form.addEventListener('submit', onFormSubmit);\nrefs.loadMoreBtn.addEventListener('click', onLoadMoreClick);\n\nfunction onFormSubmit(event) {\n    event.preventDefault();\n\n    newsApiFetch.searchQuery = event.currentTarget.elements.query.value;\n  \n  loadMoreBtn.show()\n  clearArticleContainer();\n  newsApiFetch.resetPage();  \n  fetchArticles();\n  \n}\n\nfunction onLoadMoreClick() {\n  fetchArticles();\n}\n\nfunction fetchArticles() {\n  loadMoreBtn.disable()\n  newsApiFetch.fetchData().then(articles => {\n    if (articles.length === 0) {throw new Error(\"no data\");}\n\n    appendArticles(articles);\n    loadMoreBtn.enable();\n  }).catch(onError);\n  \n}\n\nfunction appendArticles(articles) {\nconst markupArticles =  articles.reduce((markup, article) => {\n    return createMarkup(article) + markup;\n  }, '')\n\n  refs.articlesContainer.insertAdjacentHTML('beforeend', markupArticles)\n}\n\nfunction createMarkup({ url, urlToImage, title, author, description }) {\n  return `  <li>\n    <a href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer\">\n      <article>\n        <img src=\"${urlToImage}\" alt=\"\" width=\"480\">\n        <h2>${title}</h2>\n        <p>Posted by: ${author}</p>\n        <p>${description}</p>\n      </article>\n    </a>\n  </li>`;\n}\n\nfunction onError(error) {\n  return console.log(error);\n}\n\nfunction clearArticleContainer() {\n  refs.articlesContainer.innerHTML = '';\n}","const APIKEY = '525ac24a30b345fc93a5e4d238eecf81';\nconst URL = 'https://newsapi.org/v2/everything';\n\nexport default class NewsFetchApi { \n    constructor() {\n        this.searchQuery = '';\n        this.page = 1;\n\n    }\n\n    fetchData() {\n        return fetch(`${URL}?q=${this.searchQuery}&apiKey=${APIKEY}&pageSize=5&page=${this.page}`).then(resolve => resolve.json()).then(({ articles }) => {\n            this.incrementPage()\n            return articles\n        })\n    }\n\n    get query() {\n        return this.searchQuery\n    }\n\n    set query(newQuery) {\n        this.searchQuery = newQuery;\n    }\n    incrementPage() {\n        this.page += 1;\n    }\n\n    resetPage() {\n        this.page = 1;\n    }\n}\n","export default class LoadMoreBtn {\n    constructor({selector}) {\n        this.refs = this.getRefs(selector)\n    }\n\n    getRefs(selector) {\n        const refs = {};\n        refs.button = document.querySelector(selector);\n        refs.label = refs.button.querySelector('.label');\n        refs.spinner = refs.button.querySelector('.spinner')\n\n        return refs;\n    }\n\n    show() {\n        this.refs.button.classList.remove(\"is-hidden\")\n    }\n    hide() {\n        this.refs.button.classList.add(\"is-hidden\")\n    }\n\n    disable() {\n        this.refs.button.disabled = true;\n        this.refs.label.textContent = 'Грузим...';\n        this.refs.spinner.classList.remove('is-hidden');\n    }\n    enable() {\n        this.refs.button.disabled = false;\n        this.refs.label.textContent = 'Показать ещё';\n        this.refs.spinner.classList.add('is-hidden');\n    }\n}"],"names":["$b8f9b7833fa37166$var$refs","form","document","querySelector","articlesContainer","loadMoreBtn","$b8f9b7833fa37166$var$newsApiFetch","fetchData","fetch","this","searchQuery","page","then","resolve","json","articles","incrementPage","query","newQuery","resetPage","constructor","$b8f9b7833fa37166$var$loadMoreBtn","getRefs","selector","refs","button","label","spinner","show","classList","remove","hide","add","disable","disabled","textContent","enable","$b8f9b7833fa37166$var$fetchArticles","length","Error","markupArticles","reduce","markup","article","url","urlToImage","title","author","description","$b8f9b7833fa37166$var$createMarkup","insertAdjacentHTML","$b8f9b7833fa37166$var$appendArticles","catch","$b8f9b7833fa37166$var$onError","error","console","log","addEventListener","event","preventDefault","currentTarget","elements","value","innerHTML"],"version":3,"file":"index.98dd35bd.js.map"}